<!DOCTYPE html>
<html>
  
  <head>
    <title>REGALS</title>
    
    <!-- JsPsych and Plugins -->
    <script src="jspsych/jspsych.js"></script>
    <script src="jspsych/plugin-html-keyboard-response.js"></script>
    <script src="https://unpkg.com/@jspsych/plugin-preload@1.0.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-likert@1.1.3"></script>

    <link href="jspsych/jspsych.css" rel="stylesheet" type="text/css" />
    <style type="text/css">
      p{
        max-width: 100%;
      }

      .jspsych-content-wrapper{
        max-width: 60%;
      }
    </style>
  </head>
  
  <body></body>
  
  <script>
    const jsPsych = initJsPsych();

    var timeline = [];

    var tax_cases = [
        `<p>Max was injured after the faulty wall in his apartment fell on him, which was never repaired by his landlord despite continued reminders, costing Max 5000 pounds in medical bills. Max wants to sue his landlord under UK law. Advise max on how UK law applies here. Include references to relevant legislation.</p>`,
        `<p>My landlord is asking for 4 months of security deposit to get a place at my student hall of residence. He got angry when I said I could not afford it and said he will find someone else who will pay him that.<br>Can you give me advice about this situation in UK law, referencing relevant laws I can use against him?</p>`,
        `<p>My landlord keeps entering my apartment without any notice. This keeps happening even after I've asked them to let me know in advance. Please give me legal advice about this, referring to relevant UK law.</p>`
      ]

    var tax_cases = jsPsych.randomization.shuffle(tax_cases);


    const welcome = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: 
        `<p>Greetings!</p>
        <p>Thank you for participating in our user study as part of the REGALS project...</p> 
        <p>Press any key to begin.</p>`
    };
    timeline.push(welcome)


    var instructions = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: 
        `<p>In this experiment you will be presented with short descriptions of legal cases.</p>
        <p>Following each case, you will be presented with legal advice. </p>
        <p>Please rank on the subsequently presented scale how confident you would be to act on the advice provided.</p>
        <p>Press any key to begin.</p>`,
      //post_trial_gap: 2000
    };
    timeline.push(instructions)
/*
    var tax1_case = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: `<h3>Case</h3>
        <p>Max was injured after the faulty wall in his apartment fell on him, which was never repaired by his landlord despite continued reminders, costing Max 5000 pounds in medical bills. Max wants to sue his landlord under UK law. Advise max on how UK law applies here. Include references to relevant legislation.</p>`
    };
    timeline.push(tax1_case)



    var tax1_llm_reponse = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: `<h3>Case</h3>
        <p>Max was injured after the faulty wall in his apartment fell on him, which was never repaired by his landlord despite continued reminders, costing Max 5000 pounds in medical bills. Max wants to sue his landlord under UK law. Advise max on how UK law applies here. Include references to relevant legislation.</p><br>
        <h3>Advice</h3>
        <p>Under UK law, particularly the Landlord and Tenant Act 1985 and the Defective Premises Act 1972, Max likely has a strong case against his landlord for negligence regarding the faulty wall in his apartment. Landlords are obligated to maintain the structure of the property, including walls, and ensure the premises are fit for habitation. Max should gather evidence such as medical bills and correspondence with the landlord to support his case. </p>`
    };
    timeline.push(tax1_llm_reponse)

    var tax1_legal_reponse = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: ``
    };

*/

for (let i = 0; i < tax_cases.length; i++) {
  timeline.push({
    timeline: [{
      type: jsPsychSurveyLikert,
      questions: [{
        prompt: `<h3>Case ${i+1} ${tax_cases[i]}</h3>`,
        labels: [
          "Strongly Disagree",
          "",
          "",
          "",
          "Neutral",
          "",
          "",
          "",
          "Strongly Agree"
        ]
      }]
    }]
  });
}

/*
      var likert = {
        type: jsPsychSurveyLikert,
        questions: [
          {
            prompt: `<h3>Case</h3>`, tax_cases[i]
            labels: [
              "Strongly Disagree", 
              "",
              "",
              "", 
              "Neutral",
              "",
              "",
              "", 
              "Strongly Agree"
            ]
          }
        ]
      }
      timeline.push(likert)
    }
*/


    jsPsych.run(timeline);
  </script>

</html>
